"use strict";(self.webpackChunkarcgis_jsapi_react=self.webpackChunkarcgis_jsapi_react||[]).push([[7044],{96669:function(e,t,r){function n(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,n=0;n<e.length;n++){var i=e[n].size;"number"==typeof i&&(t+=i,r++)}return t/r}(e.stops):t}function a(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.maxSize,n=t.minSize;return(i(r,e)+i(n,e))/2})),n=0,a=r.length;if(0===a)return e;for(var o=0;o<a;o++)n+=r[o];var u=Math.floor(n/a);return Math.max(u,e)}function o(e){var t=e&&e.renderer,r="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return r;var i="visualVariables"in t?a(r,t.visualVariables):r;if("simple"===t.type)return n(i,t.symbol);if("unique-value"===t.type){var o=i;return t.uniqueValueInfos.forEach((function(e){o=n(o,e.symbol)})),o}if("class-breaks"===t.type){var u=i;return t.classBreakInfos.forEach((function(e){u=n(u,e.symbol)})),u}return"dot-density"===t.type||t.type,i}r.d(t,{k:function(){return o}})},87044:function(e,t,r){r.r(t),r.d(t,{default:function(){return ve}});var n=r(1413),i=r(74165),a=r(15861),o=r(15671),u=r(43144),s=r(60136),l=r(54062),p=r(27366),c=r(32718),f=r(66978),d=r(94172),y=r(49861),h=(r(63780),r(93169)),v=r(25243),m=r(69912),b=r(78983),g=r(90110),x=r(95986),w=r(34035),Z=r(83978),_=r(9229),k=r(67581),C=r(93433),I=r(11752),P=r(61120),E=r(10064),S=r(92026),j=r(53866),F=r(82582),R=r(45948),N=r(44041),O=r(87072),M=r(96669),V=r(37762),U=r(76200),q=r(50689),T=r(23084),G=r(76672),A=r(77981),J=r(58132),L=function(e){return e.spatialReference.wkid||JSON.stringify(e.spatialReference)};function D(e,t){var r=e.toJSON(),n=r.dpi,i=r.gdbVersion,a=r.geometry,o=r.geometryPrecision,u=r.height,s=r.layerOption,l=r.mapExtent,p=r.maxAllowableOffset,c=r.returnFieldName,f=r.returnGeometry,d=r.returnUnformattedValues,y=r.returnZ,h=r.spatialReference,v=r.timeExtent,m=r.tolerance,b=r.width,g=Q(e),x=g.dynamicLayers,w=g.layerDefs,Z=g.layerIds,_=t&&(0,S.pC)(t.geometry)?t.geometry:null,k={geometryPrecision:o,maxAllowableOffset:p,returnFieldName:c,returnGeometry:f,returnUnformattedValues:d,returnZ:y,tolerance:m},C=_&&_.toJSON()||a;if(k.imageDisplay="".concat(b,",").concat(u,",").concat(n),i&&(k.gdbVersion=i),C&&(delete C.spatialReference,k.geometry=JSON.stringify(C),k.geometryType=(0,A.Ji)(C)),h?k.sr=h.wkid||JSON.stringify(h):C&&C.spatialReference?k.sr=L(C):l&&l.spatialReference&&(k.sr=L(l)),k.time=v?[v.start,v.end].join(","):null,l){var I=l.xmin,P=l.ymin,E=l.xmax,j=l.ymax;k.mapExtent="".concat(I,",").concat(P,",").concat(E,",").concat(j)}return w&&(k.layerDefs=w),x&&!w&&(k.dynamicLayers=x),k.layers="popup"===s?"visible":s,Z&&!x&&(k.layers+=":".concat(Z.join(","))),k}function Q(e){var t,r,n=e.mapExtent,i=e.floors,a=e.width,o=e.sublayers,u=e.layerIds,s=e.layerOption,l=e.gdbVersion,p=null===o||void 0===o||null===(t=o.find((function(e){return null!=e.layer})))||void 0===t||null===(r=t.layer)||void 0===r?void 0:r.serviceSublayers,c="popup"===s,f={},d=(0,F.yZ)({extent:n,width:a,spatialReference:null===n||void 0===n?void 0:n.spatialReference}),y=[];if(null!==o&&void 0!==o&&o.forEach((function e(t){var r=0===d,n=0===t.minScale||d<=t.minScale,i=0===t.maxScale||d>=t.maxScale;if(t.visible&&(r||n&&i))if(t.sublayers)t.sublayers.forEach(e);else{if(!1===(null===u||void 0===u?void 0:u.includes(t.id))||c&&(!t.popupTemplate||!t.popupEnabled))return;y.unshift(t)}})),o&&!y.length)f.layerIds=[];else{var h=(0,J.FN)(y,p,l),v=y.map((function(e){var t=(0,O.f)(i,e);return e.toExportImageJSON(t)}));if(h)f.dynamicLayers=JSON.stringify(v);else{if(o){var m=y.map((function(e){return e.id}));u&&(m=m.filter((function(e){return u.includes(e)}))),f.layerIds=m}else(null===u||void 0===u?void 0:u.length)&&(f.layerIds=u);var b=function(e,t){var r=!(null===e||void 0===e||!e.length),n=t.filter((function(e){return null!=e.definitionExpression||r&&null!=e.floorInfo}));return n.length?n.map((function(t){var r=(0,O.f)(e,t),n=(0,G._)(r,t.definitionExpression);return{id:t.id,definitionExpression:n}})):null}(i,y);if((0,S.pC)(b)&&b.length){var g,x={},w=(0,V.Z)(b);try{for(w.s();!(g=w.n()).done;){var Z=g.value;Z.definitionExpression&&(x[Z.id]=Z.definitionExpression)}}catch(_){w.e(_)}finally{w.f()}Object.keys(x).length&&(f.layerDefs=JSON.stringify(x))}}}return f}var B,z=r(59486),H=r(62044),W=r(46784),K=r(78952),Y=B=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).dpi=96,n.floors=null,n.gdbVersion=null,n.geometry=null,n.geometryPrecision=null,n.height=400,n.layerIds=null,n.layerOption="top",n.mapExtent=null,n.maxAllowableOffset=null,n.returnFieldName=!0,n.returnGeometry=!1,n.returnM=!1,n.returnUnformattedValues=!0,n.returnZ=!1,n.spatialReference=null,n.sublayers=null,n.timeExtent=null,n.tolerance=null,n.width=400,n}return(0,u.Z)(r,null,[{key:"from",value:function(e){return(0,v.TJ)(B,e)}}]),r}(W.wq);(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],Y.prototype,"dpi",void 0),(0,p._)([(0,y.Cb)()],Y.prototype,"floors",void 0),(0,p._)([(0,y.Cb)({type:String,json:{write:!0}})],Y.prototype,"gdbVersion",void 0),(0,p._)([(0,y.Cb)({types:z.qM,json:{read:A.im,write:!0}})],Y.prototype,"geometry",void 0),(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],Y.prototype,"geometryPrecision",void 0),(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],Y.prototype,"height",void 0),(0,p._)([(0,y.Cb)({type:[Number],json:{write:!0}})],Y.prototype,"layerIds",void 0),(0,p._)([(0,y.Cb)({type:["top","visible","all","popup"],json:{write:!0}})],Y.prototype,"layerOption",void 0),(0,p._)([(0,y.Cb)({type:j.Z,json:{write:!0}})],Y.prototype,"mapExtent",void 0),(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],Y.prototype,"maxAllowableOffset",void 0),(0,p._)([(0,y.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"returnFieldName",void 0),(0,p._)([(0,y.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"returnGeometry",void 0),(0,p._)([(0,y.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"returnM",void 0),(0,p._)([(0,y.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"returnUnformattedValues",void 0),(0,p._)([(0,y.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"returnZ",void 0),(0,p._)([(0,y.Cb)({type:K.Z,json:{write:!0}})],Y.prototype,"spatialReference",void 0),(0,p._)([(0,y.Cb)()],Y.prototype,"sublayers",void 0),(0,p._)([(0,y.Cb)({type:H.Z,json:{write:!0}})],Y.prototype,"timeExtent",void 0),(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],Y.prototype,"tolerance",void 0),(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],Y.prototype,"width",void 0);var X=Y=B=(0,p._)([(0,m.j)("esri.rest.support.IdentifyParameters")],Y),$=r(52639),ee=r(38511),te=r(31201),re=r(27823),ne=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).displayFieldName=null,n.feature=null,n.layerId=null,n.layerName=null,n}return(0,u.Z)(r,[{key:"readFeature",value:function(e,t){return $.Z.fromJSON({attributes:(0,n.Z)({},t.attributes),geometry:(0,n.Z)({},t.geometry)})}},{key:"writeFeature",value:function(e,t){if(e){var r=e.attributes,i=e.geometry;r&&(t.attributes=(0,n.Z)({},r)),(0,S.pC)(i)&&(t.geometry=i.toJSON(),t.geometryType=re.P$.toJSON(i.type))}}}]),r}(W.wq);(0,p._)([(0,y.Cb)({type:String,json:{write:!0}})],ne.prototype,"displayFieldName",void 0),(0,p._)([(0,y.Cb)({type:$.Z})],ne.prototype,"feature",void 0),(0,p._)([(0,ee.r)("feature",["attributes","geometry"])],ne.prototype,"readFeature",null),(0,p._)([(0,te.c)("feature")],ne.prototype,"writeFeature",null),(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],ne.prototype,"layerId",void 0),(0,p._)([(0,y.Cb)({type:String,json:{write:!0}})],ne.prototype,"layerName",void 0);var ie=ne=(0,p._)([(0,m.j)("esri.rest.support.IdentifyResult")],ne);function ae(e,t,r){return oe.apply(this,arguments)}function oe(){return oe=(0,a.Z)((0,i.Z)().mark((function e(t,r,a){var o,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(r=se(r)).geometry?[r.geometry]:[],u=(0,T.en)(t),e.abrupt("return",(u.path+="/identify",(0,q.aX)(o).then((function(e){var t=D(r,{geometry:e&&e[0]}),i=(0,T.cv)((0,n.Z)((0,n.Z)({},u.query),{},{f:"json"},t)),o=(0,T.lA)(i,a);return(0,U.default)(u.path,o).then(ue).then((function(e){return le(e,r.sublayers)}))}))));case 2:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function ue(e){var t=e.data;t.results=t.results||[];var r={results:[]};return r.results=t.results.map((function(e){return ie.fromJSON(e)})),r}function se(e){return X.from(e)}function le(e,t){if(null===t||void 0===t||!t.length)return e;var r=new Map;t.forEach((function e(t){r.set(t.id,t),t.sublayers&&t.sublayers.forEach(e)}));var n,i=(0,V.Z)(e.results);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.feature.sourceLayer=r.get(a.layerId)}}catch(o){i.e(o)}finally{i.f()}return e}var pe=r(819),ce=r(24405),fe=r(13107),de=r(45008),ye=c.Z.getLogger("esri.views.2d.layers.MapImageLayerView2D"),he=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;return(0,o.Z)(this,r),(e=t.apply(this,arguments))._highlightGraphics=new b.J,e}return(0,u.Z)(r,[{key:"update",value:function(e){this.strategy.update(e).catch((function(e){(0,f.D_)(e)||ye.error(e)}))}},{key:"attach",value:function(){var e=this,t=this.layer,r=t.imageMaxWidth,n=t.imageMaxHeight,i=t.version,a=i>=10.3,o=i>=10;this._bitmapContainer=new g.c,this.container.addChild(this._bitmapContainer);var u=new w.Z({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:function(){return e.requestUpdate()},container:new Z.Z(this.view.featuresTilingScheme)});this.container.addChild(u.container),this.strategy=new _.Z({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:r,imageMaxHeight:n,imageRotationSupported:a,imageNormalizationSupported:o,hidpi:!0}),this.handles.add((0,d.YP)((function(){return e.exportImageVersion}),(function(){return e.requestUpdate()})),"exportImageVersion"),this.handles.add((0,d.YP)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.floors}),(function(){return e.requestUpdate()})),"view.floors"),this.requestUpdate()}},{key:"detach",value:function(){this.handles.remove("exportImageVersion"),this.handles.remove("view.floors"),this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren()}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"highlight",value:function(e,t){var r=this;return this._highlightGraphics.add(e),{remove:function(){r._highlightGraphics.remove(e)}}}},{key:"supportsSpatialReference",value:function(e){return this.layer.serviceSupportsSpatialReference(e)}},{key:"createFetchPopupFeaturesQueryGeometry",value:function(e,t){return(0,de.K)(e,t,this.view)}},{key:"doRefresh",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.requestUpdate();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return this.strategy.updating||this.updateRequested}},{key:"fetchImage",value:function(e,t,r,i){return this.layer.fetchImage(e,t,r,(0,n.Z)({timeExtent:this.timeExtent,floors:this.view.floors},i))}}]),r}(function(e){var t=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"initialize",value:function(){this.exportImageParameters=new N.R({layer:this.layer})}},{key:"destroy",value:function(){this.exportImageParameters.destroy(),this.exportImageParameters=null}},{key:"exportImageVersion",get:function(){var e;return null!==(e=this.exportImageParameters)&&void 0!==e&&e.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}},{key:"fetchPopupFeatures",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n,a,o,u,s,l,p,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=this.layer,t){e.next=3;break}throw new E.Z("mapimagelayer:fetchPopupFeatures","Nothing to fetch without area",{layer:p});case 3:if(c=null===(n=null===(a=this.layer.capabilities)||void 0===a||null===(o=a.operations)||void 0===o?void 0:o.supportsQuery)||void 0===n||n,(null===(u=null===(s=this.layer.capabilities)||void 0===s||null===(l=s.operations)||void 0===l?void 0:l.supportsIdentify)||void 0===u||u)&&this.layer.version>=10.5||c){e.next=6;break}throw new E.Z("mapimagelayer:fetchPopupFeatures-not-supported","query operation is disabled for this service",{layer:p});case 6:return e.abrupt("return",c?this._fetchPopupFeaturesUsingQueries(t,r):this._fetchPopupFeaturesUsingIdentify(t,r));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e;return!!(0,I.Z)((0,P.Z)(r.prototype),"canResume",this).call(this)&&!(null!==(e=this.timeExtent)&&void 0!==e&&e.isEmpty)}},{key:"_fetchPopupFeaturesUsingIdentify",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._createIdentifyParameters(t,r);case 2:if(n=e.sent,!(0,S.Wi)(n)){e.next=5;break}return e.abrupt("return",[]);case 5:return e.next=7,ae(this.layer.parsedUrl,n);case 7:return a=e.sent,o=a.results,e.abrupt("return",o.map((function(e){return e.feature})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_createIdentifyParameters",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n,o,u,s,l,p,c,f,d,y,v,m,b,g,x=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=this.view,s=u.floors,l=u.spatialReference,p=u.scale,c=(0,S.pC)(r)?r.event:null,e.next=7,this._collectPopupProviders(this.layer.sublayers,p,r);case 7:if((f=e.sent).length){e.next=10;break}return e.abrupt("return",null);case 10:return e.next=12,Promise.all(f.map((function(e){return e.sublayer.load().catch((function(){}))})));case 12:if(d=Math.min((0,h.Z)("mapimagelayer-popup-identify-max-tolerance"),this.layer.allSublayers.reduce((function(e,t){return t.renderer?(0,M.k)({renderer:t.renderer,event:c}):e}),2)),y=this.createFetchPopupFeaturesQueryGeometry(t,d),v=(0,F.dp)(p,l),m=Math.round(y.width/v),b=new j.Z({xmin:y.center.x-v*m,ymin:y.center.y-v*m,xmax:y.center.x+v*m,ymax:y.center.y+v*m,spatialReference:y.spatialReference}),e.t0=!1===(null===(n=this.layer.capabilities)||void 0===n||null===(o=n.operations)||void 0===o?void 0:o.supportsQuery),e.t0){e.next=22;break}return e.next=21,new Promise((function(e){var t=!1;Promise.all(f.map(function(){var r=(0,a.Z)((0,i.Z)().mark((function r(n){var a,o;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(a=n.popupTemplate)){r.next=9;break}return r.next=4,x._loadArcadeModules(a);case 4:if(o=r.sent,!t){r.next=7;break}return r.abrupt("return");case 7:(null===o||void 0===o?void 0:o.arcadeUtils.hasGeometryOperations(a))&&(t=!0,e(!0));case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())).finally((function(){return e(!1)}))}));case 21:e.t0=e.sent;case 22:return g=e.t0,e.abrupt("return",new X({floors:s,gdbVersion:this.layer.gdbVersion,geometry:t,height:m,layerOption:"popup",mapExtent:b,maxAllowableOffset:g?0:v,returnGeometry:!0,spatialReference:l,sublayers:this.layer.sublayers,timeExtent:this.timeExtent,tolerance:d,width:m}));case 24:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_fetchPopupFeaturesUsingQueries",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n,o,u,s=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._collectPopupProviders(this.layer.sublayers,this.view.scale,r);case 2:return n=e.sent,o=(0,S.pC)(r)?r.event:null,u=n.map(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r){var n,a,u,l,p,c,f,d,y,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.sublayer,a=r.popupTemplate,e.next=3,n.load().catch((function(){}));case 3:return u=n.createQuery(),l=(0,M.k)({renderer:n.renderer,event:o}),p=s.createFetchPopupFeaturesQueryGeometry(t,l),u.geometry=p,e.next=7,(0,ce.e)(n,a);case 7:if(u.outFields=e.sent,!("floors"in s.view)){e.next=11;break}d=null===(c=s.view)||void 0===c||null===(f=c.floors)||void 0===f?void 0:f.clone(),y=(0,O.f)(d,n),(0,S.pC)(y)&&(u.where=u.where?"(".concat(u.where,") AND (").concat(y,")"):y);case 11:return e.next=13,s._loadArcadeModules(a);case 13:return(h=e.sent)&&h.arcadeUtils.hasGeometryOperations(a)||(u.maxAllowableOffset=p.width/l),e.next=17,n.queryFeatures(u);case 17:return e.abrupt("return",e.sent.features);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,(0,f.as)(u);case 7:return e.abrupt("return",e.sent.reduce((function(e,t){return t.value?[].concat((0,C.Z)(e),(0,C.Z)(t.value)):e}),[]).filter((function(e){return null!=e})));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_collectPopupProviders",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r,o){var u,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[],s=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var a,l,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0===t.minScale||r<=t.minScale,l=0===t.maxScale||r>=t.maxScale,t.visible&&a&&l&&(t.sublayers?t.sublayers.forEach(s):t.popupEnabled&&(p=(0,ce.V)(t,(0,n.Z)((0,n.Z)({},o),{},{defaultPopupTemplateEnabled:!1})),(0,S.pC)(p)&&u.unshift({sublayer:t,popupTemplate:p})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=t.toArray().reverse().map(s),e.next=3,Promise.all(l);case 3:return e.abrupt("return",u);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_loadArcadeModules",value:function(e){var t;if(null!==(t=e.expressionInfos)&&void 0!==t&&t.length||Array.isArray(e.content)&&e.content.some((function(e){return"expression"===e.type})))return(0,pe.LC)()}}]),r}(e);return(0,p._)([(0,y.Cb)()],t.prototype,"exportImageParameters",void 0),(0,p._)([(0,y.Cb)({readOnly:!0})],t.prototype,"exportImageVersion",null),(0,p._)([(0,y.Cb)()],t.prototype,"layer",void 0),(0,p._)([(0,y.Cb)()],t.prototype,"suspended",void 0),(0,p._)([(0,y.Cb)(R.qG)],t.prototype,"timeExtent",void 0),t=(0,p._)([(0,m.j)("esri.views.layers.MapImageLayerView")],t)}((0,fe.Z)((0,x.y)(k.Z))));(0,p._)([(0,y.Cb)()],he.prototype,"strategy",void 0),(0,p._)([(0,y.Cb)()],he.prototype,"updating",void 0);var ve=he=(0,p._)([(0,m.j)("esri.views.2d.layers.MapImageLayerView2D")],he)},83978:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(15671),i=r(43144),a=r(11752),o=r(61120),u=r(60136),s=r(54062),l=r(27366),p=(r(32718),r(25243),r(63780),r(93169),r(75366),r(69912)),c=r(80613),f=r(82022),d=r(8548),y=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"doRender",value:function(e){e.drawPhase===c.jx.HIGHLIGHT&&(0,a.Z)((0,o.Z)(r.prototype),"doRender",this).call(this,e)}},{key:"renderChildren",value:function(e){if(this.attributeView.bindTextures(e.context),this.children.some((function(e){return e.hasData}))){(0,a.Z)((0,o.Z)(r.prototype),"renderChildren",this).call(this,e);var t=e.painter.effects.highlight;t.bind(e),e.context.setColorMask(!0,!0,!0,!0),e.context.clear(d.lk.COLOR_BUFFER_BIT),this._renderChildren(e,t.defines.concat(["highlightAll"])),t.draw(e),t.unbind()}}}]),r}(f.Z),h=y=(0,l._)([(0,p.j)("esri.views.2d.layers.support.HighlightGraphicContainer")],y)},24405:function(e,t,r){r.d(t,{V:function(){return p},e:function(){return s}});var n=r(74165),i=r(93433),a=r(15861),o=r(92026),u=r(80031);function s(e){return l.apply(this,arguments)}function l(){return l=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,l,p,c,f,d,y,h=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:t.popupTemplate,!(0,o.Wi)(r)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,r.getRequiredFields(t.fieldsIndex);case 5:if(a=e.sent,s=r.lastEditInfoEnabled,l=t.objectIdField,p=t.typeIdField,c=t.globalIdField,f=t.relationships,!a.includes("*")){e.next=13;break}return e.abrupt("return",["*"]);case 13:if(!s){e.next=19;break}return e.next=16,(0,u.CH)(t);case 16:e.t0=e.sent,e.next=20;break;case 19:e.t0=[];case 20:return d=e.t0,y=(0,u.Q0)(t.fieldsIndex,[].concat((0,i.Z)(a),(0,i.Z)(d))),e.abrupt("return",(p&&y.push(p),y&&l&&t.fieldsIndex.has(l)&&!y.includes(l)&&y.push(l),y&&c&&t.fieldsIndex.has(c)&&!y.includes(c)&&y.push(c),f&&f.forEach((function(e){var r=e.keyField;y&&r&&t.fieldsIndex.has(r)&&!y.includes(r)&&y.push(r)})),y));case 23:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function p(e,t){return e.popupTemplate?e.popupTemplate:(0,o.pC)(t)&&t.defaultPopupTemplateEnabled&&(0,o.pC)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}},45008:function(e,t,r){r.d(t,{K:function(){return o}});r(59486);var n=r(92026),i=r(68860),a=r(53866);function o(e,t,r){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new a.Z;if("2d"===r.type)o=t*r.resolution;else if("3d"===r.type){var s=r.overlayPixelSizeInMapUnits(e),l=r.basemapSpatialReference;o=(0,n.pC)(l)&&!l.equals(r.spatialReference)?(0,i.c9)(l)/(0,i.c9)(r.spatialReference):t*s}var p=e.x-o,c=e.y-o,f=e.x+o,d=e.y+o,y=r.spatialReference;return u.xmin=Math.min(p,f),u.ymin=Math.min(c,d),u.xmax=Math.max(p,f),u.ymax=Math.max(c,d),u.spatialReference=y,u}new a.Z}}]);
//# sourceMappingURL=7044.c25818c4.chunk.js.map