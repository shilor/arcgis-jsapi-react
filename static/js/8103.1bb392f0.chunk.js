"use strict";(self.webpackChunkarcgis_jsapi_react=self.webpackChunkarcgis_jsapi_react||[]).push([[8103],{8103:function(e,a,t){t.r(a),t.d(a,{getContrastingBackgroundTheme:function(){return S},getRenderSymbolParameters:function(){return L},previewSymbol2D:function(){return F}});var n=t(74165),l=t(1413),i=t(15861),o=t(51995),r=t(10064),s=t(17842),u=t(79563),c=t(37817),d=t(1682),m=t(28357),h="picture-fill",p=c.b_.size,v=c.b_.maxSize,f=c.b_.maxOutlineSize,y=c.b_.lineWidth,g=225,w=document.createElement("canvas");function b(e,a){var t=w.getContext("2d"),n=[];return a&&(a.weight&&n.push(a.weight),a.size&&n.push(a.size+"px"),a.family&&n.push(a.family)),t.font=n.join(" "),t.measureText(e).width}function k(e){if(0===e.length)return 0;if(e.length>2){var a=(0,s.Wz)(1),t=parseFloat(e);switch(e.slice(-2)){case"px":return t;case"pt":return t*a;case"in":return 72*t*a;case"pc":return 12*t*a;case"mm":return 2.8346456692913384*t*a;case"cm":return 28.346456692913385*t*a}}return parseFloat(e)}function x(e){var a=null===e||void 0===e?void 0:e.size;return{width:null!=a&&"object"==typeof a&&"width"in a?(0,s.F2)(a.width):null,height:null!=a&&"object"==typeof a&&"height"in a?(0,s.F2)(a.height):null}}function M(e,a){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.Z)((0,n.Z)().mark((function e(a,t){var l,i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.fill,i=a.color,"pattern"!==(null===l||void 0===l?void 0:l.type)||!i||a.type===h){e.next=6;break}return e.next=4,(0,u.Od)(l.src,i.toCss(!0));case 4:o=e.sent,l.src=o,t.fill=l;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,a){return e>a?"dark":"light"}function L(e,a){var t,n,i="number"==typeof(null===a||void 0===a?void 0:a.size)?null===a||void 0===a?void 0:a.size:null,o=null!=i?(0,s.F2)(i):null,r=null!=(null===a||void 0===a?void 0:a.maxSize)?(0,s.F2)(a.maxSize):null,d=null!=(null===a||void 0===a?void 0:a.rotation)?a.rotation:"angle"in e?e.angle:null,m=(0,u._M)(e),g=(0,u.mx)(e);"dark"!==S(e,245)||(null===a||void 0===a?void 0:a.ignoreWhiteSymbols)||(g=(0,l.Z)((0,l.Z)({width:.75},g),{},{color:"#bdc3c7"}));var w={shape:null,fill:m,stroke:g,offset:[0,0]};(null===(t=g)||void 0===t?void 0:t.width)&&(g.width=Math.min(g.width,f));var M=(null===(n=g)||void 0===n?void 0:n.width)||0,Z=null!=(null===a||void 0===a?void 0:a.size)&&(null==(null===a||void 0===a?void 0:a.scale)||(null===a||void 0===a?void 0:a.scale)),z=0,L=0,F=!1;switch(e.type){case"simple-marker":var C=e.style,_=Math.min(null!=o?o:(0,s.F2)(e.size),r||v);switch(z=_,L=_,C){case"circle":w.shape={type:"circle",cx:0,cy:0,r:.5*_},Z||(z+=M,L+=M);break;case"cross":w.shape={type:"path",path:[{command:"M",values:[0,.5*L]},{command:"L",values:[z,.5*L]},{command:"M",values:[.5*z,0]},{command:"L",values:[.5*z,L]}]};break;case"diamond":w.shape={type:"path",path:[{command:"M",values:[0,.5*L]},{command:"L",values:[.5*z,0]},{command:"L",values:[z,.5*L]},{command:"L",values:[.5*z,L]},{command:"Z",values:[]}]},Z||(z+=M,L+=M);break;case"square":w.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[z,0]},{command:"L",values:[z,L]},{command:"L",values:[0,L]},{command:"Z",values:[]}]},Z||(z+=M,L+=M),d&&(F=!0);break;case"triangle":w.shape={type:"path",path:[{command:"M",values:[.5*z,0]},{command:"L",values:[z,L]},{command:"L",values:[0,L]},{command:"Z",values:[]}]},Z||(z+=M,L+=M),d&&(F=!0);break;case"x":w.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[z,L]},{command:"M",values:[z,0]},{command:"L",values:[0,L]}]},d&&(F=!0);break;case"path":w.shape={type:"path",path:e.path||""},Z||(z+=M,L+=M),d&&(F=!0),Z=!0}break;case"simple-line":var j,E=x(a),D=E.width,O=E.height,q=null!=O?O:Math.min(null!=o?o:M,r||f),P=null!=D?D:y;g.width=q,z=P,L=q;var T=(null===w||void 0===w||null===(j=w.stroke)||void 0===j?void 0:j.cap)||"butt",W="round"===T;Z=!0,w.stroke.cap="butt"===T?"square":T,w.shape={type:"path",path:[{command:"M",values:[W?q/2:0,L/2]},{command:"L",values:[W?z-q/2:z,L/2]}]};break;case h:case"simple-fill":var A="object"==typeof(null===a||void 0===a?void 0:a.symbolConfig)&&(null===a||void 0===a?void 0:a.symbolConfig.isSquareFill),B=x(a),R=B.width,V=B.height;z=A&&null!=R?R:null!=o?o:p,L=A&&null!=V?V:z,Z||(z+=M,L+=M),Z=!0,w.shape=A?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[z,0]},{command:"L",values:[z,L]},{command:"L",values:[0,L]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:c.JZ.fill[0];break;case"picture-marker":var X=(0,s.F2)(e.width),H=(0,s.F2)(e.height),J=null!=o?o:Math.max(X,H),G=X/H;X=G<=1?Math.ceil(J*G):J,H=G<=1?J:Math.ceil(J/G),z=Math.min(X,r||v),L=Math.min(H,r||v),w.shape={type:"image",x:-Math.round(z/2),y:-Math.round(L/2),width:z,height:L,src:e.url||""},d&&(F=!0);break;case"text":var I=e,K=I.text||"Aa",N=I.font,Q=Math.min(null!=o?o:(0,s.F2)(N.size),r||v),U=b(K,{weight:N.weight,size:Q,family:N.family}),Y=/[\uE600-\uE6FF]/.test(K);z=Y?Q:U,L=Q;var $=.25*k((N?Q:0).toString());Y&&($+=5),w.shape={type:"text",text:K,x:I.xoffset||0,y:I.yoffset||$,align:"middle",alignBaseline:I.verticalAlignment,decoration:N&&N.decoration,rotated:I.rotated,kerning:I.kerning},w.font=N&&{size:Q,style:N.style,decoration:N.decoration,weight:N.weight,family:N.family}}return{shapeDescriptor:w,size:[z,L],renderOptions:{node:null===a||void 0===a?void 0:a.node,scale:Z,opacity:null===a||void 0===a?void 0:a.opacity,rotation:d,useRotationSize:F,effectView:null===a||void 0===a?void 0:a.effectView}}}function F(e,a){return C.apply(this,arguments)}function C(){return(C=(0,i.Z)((0,n.Z)().mark((function e(a,t){var i,o,s,u,m,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=L(a,t),o=i.shapeDescriptor,s=i.size,u=i.renderOptions,o.shape){e.next=3;break}throw new r.Z("symbolPreview: renderPreviewHTML2D","symbol not supported.");case 3:return e.next=5,M(a,o);case 5:return m=[[o]],"object"==typeof(null===t||void 0===t?void 0:t.symbolConfig)&&null!==t&&void 0!==t&&t.symbolConfig.applyColorModulation&&(h=.6*s[0],m.unshift([(0,l.Z)((0,l.Z)({},o),{},{offset:[-h,0],fill:(0,c.dc)(o.fill,-.3)})]),m.push([(0,l.Z)((0,l.Z)({},o),{},{offset:[h,0],fill:(0,c.dc)(o.fill,.3)})]),s[0]+=2*h,u.scale=!1),e.abrupt("return",(0,d.w)(m,s,u));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,t=(0,u._M)(e),n=(0,u.mx)(e),l=!t||"type"in t?null:new o.Z(t),i=null!==n&&void 0!==n&&n.color?new o.Z(null===n||void 0===n?void 0:n.color):null,r=l?z((0,m.EX)(l),a):null,s=i?z((0,m.EX)(i),a):null;return s?r?r===s?r:a>=g?"light":"dark":s:r}}}]);
//# sourceMappingURL=8103.1bb392f0.chunk.js.map